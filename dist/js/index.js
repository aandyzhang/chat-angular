"use strict";angular.module("app",["ui.router"]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("chat",{url:"/chat",templateUrl:"view/chat.html",controller:"chatCtrl"}),e.otherwise("chat")}]),angular.module("app").controller("audioCtrl",["$scope",function(t){}]),angular.module("app").controller("chatCtrl",["$scope","$http","Data",function(t,e,o){t.data={},t.error=!1,t.load=!0,t.msg="",t.options=[],t.info=[];o.data().then(function(e){0!=e.errcode&&"0"!=e.errcode||(t.data=e.data,t.load=!1,t.data.list.map(function(e,o){var r=JSON.parse(e.content),n={fromFans:e.fromFans,msgType:e.msgType,content:r};t.options.push(n)}))},function(e){t.load=!0}),t.push=function(){t.msg.length<=0?t.error=!0:(t.info.push(t.msg),t.msg="",t.error=!1)},t.close=function(){t.msg=""}}]),angular.module("app").controller("fileController",["$scope",function(t){console.log(t.options)}]),angular.module("app").controller("listController",["$scope",function(t){t.imageStatus=!1,t.setBig=function(){t.imageStatus=!0},t.close=function(){t.imageStatus=!1}}]),angular.module("app").directive("file",function(){return{restrict:"AE",replace:!0,templateUrl:"view/template/file.html",scope:{options:"="},controller:"fileController"}}),angular.module("app").directive("list",function(){return{restrict:"AE",replace:!0,templateUrl:"view/template/list.html",scope:{option:"="},controller:"listController"}}),angular.module("app").directive("mp3",function(t,e){return{restrict:"AE",controller:"audioCtrl",templateUrl:"view/template/mp3.html",scope:{options:"="},link:function(o,r){o.getUrl=function(e){return t.trustAsResourceUrl(e)};var n=r.find("audio")[0];o.status=n.paused,o.play=function(){o.status?(n.play(),o.status=!1):(n.pause(),o.status=!0)},$(n).on("ended",function(){e(function(){o.status=!0})})}}}),angular.module("app").directive("mp4",["$sce","$timeout",function(t,e){return{restrict:"AE",replace:!0,templateUrl:"view/template/mp4.html",scope:{options:"="},link:function(o,r){o.getUrl=function(e){return t.trustAsResourceUrl(e)};var n=r.find("video")[0];o.status=n.paused,o.play=function(){o.status?(n.play(),o.status=!1):(n.pause(),o.status=!0)},$(n).on("ended",function(){e(function(){o.status=!0})})}}}]),angular.module("app").factory("Data",["$http","$q",function(t,e){return{data:function(){var o=e.defer();return t.post("https://easy-mock.com/mock/5a3c66030df23b51b3614915/angular-less/kefu/msg/list#!method=post").success(function(t){o.resolve(t)}).error(function(t){o.reject(t)}),o.promise}}}]),angular.module("app").filter("getSize",function(){return function(t){if(0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,e)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}});